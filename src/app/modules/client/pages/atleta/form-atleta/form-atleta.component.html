<div class="mt-3">

  <div class="template__header">
    <h2>Cédula : {{ id? 'Editar' : 'Agregar' }}</h2>
  </div>

  <div class="template__component">

    <form [formGroup]="form">
      <div class="row">
        <div class="col-md-6">
          <div class="m-input">
            <label>Cédula</label>
            <input class="form-control" [readOnly]="id" type="text" placeholder="Cédula" formControlName="cedula" />
            <div *ngIf="formValidator?.hasErrors('cedula')" class="text-danger">
              <div>{{formValidator.getErrorMessages('cedula', 'Cédula')}}</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="m-input">
            <label>Nombres</label>
            <input class="form-control" type="text" placeholder="Nombres" formControlName="first_name" />
            <div *ngIf="formValidator?.hasErrors('first_name')" class="text-danger">
              <div>{{formValidator.getErrorMessages('first_name', 'Nombres')}}</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="m-input">
            <label>Apellidos</label>
            <input class="form-control" type="text" placeholder="Apellidos" formControlName="last_name" />
            <div *ngIf="formValidator?.hasErrors('last_name')" class="text-danger">
              <div>{{formValidator.getErrorMessages('last_name', 'Apellidos')}}</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="m-input">
            <label>Genero</label>
            <select class="form-select" formControlName="gender">
              <option *ngFor="let item of genders" [value]="item">{{ `${item === "MALE" ? 'Masculino' : 'Femenino'}` }}</option>
            </select>
            <div *ngIf="formValidator?.hasErrors('gender')" class="text-danger">
              <div>{{formValidator.getErrorMessages('gender', 'Genero')}}</div>
            </div>
          </div>
        </div>

      

        <div class="col-md-6">
          <div class="m-input">
            <label>Fecha de Nacimiento</label>
            <input class="form-control" type="date" placeholder="Fecha de Nacimiento" formControlName="birthdate" />
            <div *ngIf="formValidator?.hasErrors('birthdate')" class="text-danger">
              <div>{{formValidator.getErrorMessages('birthdate', 'Fecha de Nacimiento')}}</div>
            </div>
          </div>
        </div>

        

        <div class="col-md-6">
          <div class="m-input">
            <label>Estado</label>
            <select class="form-select" formControlName="state_id">
              <option *ngFor="let item of estados" [value]="item.id">{{ item.name_state }}</option>
            </select>
            <div *ngIf="formValidator?.hasErrors('state_id')" class="text-danger">
              <div>{{formValidator.getErrorMessages('state_id', 'Estado')}}</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="m-input">
            <label>Teléfono</label>
            <input class="form-control input-phone" type="text" placeholder="Teléfono" formControlName="phone_number" />
            <div *ngIf="formValidator?.hasErrors('phone_number')" class="text-danger">
              <div>{{formValidator.getErrorMessages('phone_number', 'Teléfono')}}</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="m-input">
            <label>Dirección</label>
            <input class="form-control" type="text" placeholder="Dirección" formControlName="address" />
            <div *ngIf="formValidator?.hasErrors('address')" class="text-danger">
              <div>{{formValidator.getErrorMessages('address', 'Dirección')}}</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="m-input">
            <label>Correo Electrónico</label>
            <input class="form-control" type="email" placeholder="Correo Electrónico" formControlName="email" />
            <div *ngIf="formValidator?.hasErrors('email')" class="text-danger">
              <div>{{formValidator.getErrorMessages('email', 'Correo Electrónico')}}</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="m-input">
            <label>Cargar Imagen</label>
            
            <div class="d-flex">
              <input type="file" class="form-control" (change)="onFileSelect($event)" />
            <button type="button" class="btn" (click)="randomProfilePhoto()">
              <i class="bi bi-dice-6"></i>
            </button>
            </div>

            <div class="pt-2">
              <img width="200" *ngIf="selectedFile || atleta?.profile_photo" [src]="selectedFile? selectedFileUrl: atleta?.profile_photo" alt="Imagen del usuario" />
              
            </div>


          </div>
        </div>
      </div>

    </form>

    <div class="d-flex justify-content-end gap-1 mt-3">
      <button type="button" class="btn btn-primary" (click)="onSave()">
        {{ id? 'Actualizar' : 'Registrar' }}
      </button>

      <button type="button" class="btn btn-outline-primary" (click)="onCancelar()">
        Cancelar
      </button>
    </div>

  </div>



</div>
